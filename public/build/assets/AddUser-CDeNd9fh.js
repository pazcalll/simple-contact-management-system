import{d as P,n as D,C as L,y as w,g as V,o as r,w as o,b as d,i as O,e as t,a as n,h as m,f as i,u as l,t as u,F as k,r as U}from"./app-DclS3Mo_.js";import{_ as T,a as q,b as z,c as G}from"./CardHeader.vue_vue_type_script_setup_true_lang-HMidOAs7.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-Dv6YCp0e.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-CJaDz8Ub.js";import{_ as H,t as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CJpIDF1C.js";import{_ as g}from"./index-aLcjmCty.js";import{a as J}from"./users-BtwOUv08.js";import{_ as C,a as S,b as B,c as N,d as R,e as E}from"./SelectContent.vue_vue_type_script_setup_true_lang-npAGBR97.js";import"./useForwardExpose-CDZ1qseX.js";import"./useForwardPropsEmits-DOmNjagO.js";import"./x-DSX2J4U8.js";import"./RovingFocusGroup-tJ9-_kb9.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BfAEMs2c.js";import"./check-C2iIHvMx.js";const K={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Q={class:"mx-0 flex w-full justify-center"},W={class:"mx-3 my-5 space-y-2"},X={key:0,class:"text-xs text-red-500"},Y={class:"mx-3 my-5 space-y-2"},Z={key:0,class:"text-xs text-red-500"},h={class:"mx-3 my-5 space-y-2"},ee={key:0,class:"text-xs text-red-500"},se={class:"mx-3 my-5 space-y-2"},le={key:0,class:"text-xs text-red-500"},te={class:"mx-3 my-5 space-y-2"},oe={key:0,class:"text-xs text-red-500"},ae={class:"mx-3 my-5 space-y-2"},re={key:0,class:"text-xs text-red-500"},de={key:0,class:"mx-3 my-5 space-y-2"},ie={key:0,class:"text-xs text-red-500"},ne={class:"mx-3 grid w-full grid-cols-2 gap-4"},ge=P({__name:"AddUser",setup(ue){const j=D(),s=L({name:"",email:"",password:"",password_confirmation:"",mobile:"",role_id:"",upline_id:""}),b=j.props.roles,$=w([]),x=w(),A=w(),F=async()=>{s.submit("post","/admins/users",{onError:y=>{let e="";for(const[,_]of Object.entries(y))e=`${_}`;I.error(e,{duration:6e3,class:"!bg-red-500 !text-white"})}})},M=async y=>{var _;const e=b.filter(p=>p.id===y)[0];if(x.value=e,e.upline){const p=await J(((_=e.upline)==null?void 0:_.id)+"");$.value=p}s.upline_id="",A.value=void 0};return(y,e)=>(r(),V(H,null,{default:o(()=>[d("div",K,[d("div",Q,[d("form",{onSubmit:O(F,["prevent"])},[t(T,{class:"block w-[26rem] md:w-[40rem]"},{default:o(()=>[t(q,{class:"w-full text-center"},{default:o(()=>e[7]||(e[7]=[d("h2",{class:"text-2xl font-bold"},"Add User",-1)])),_:1}),t(z,null,{default:o(()=>{var _,p;return[d("div",W,[t(f,null,{default:o(()=>e[8]||(e[8]=[i(" Name ")])),_:1}),t(c,{modelValue:l(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).name=a)},null,8,["modelValue"]),l(s).errors.name?(r(),n("div",X,u(l(s).errors.name),1)):m("",!0)]),d("div",Y,[t(f,null,{default:o(()=>e[9]||(e[9]=[i(" Email ")])),_:1}),t(c,{modelValue:l(s).email,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).email=a),type:"email"},null,8,["modelValue"]),l(s).errors.email?(r(),n("div",Z,u(l(s).errors.email),1)):m("",!0)]),d("div",h,[t(f,null,{default:o(()=>e[10]||(e[10]=[i(" Password ")])),_:1}),t(c,{modelValue:l(s).password,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).password=a),type:"password"},null,8,["modelValue"]),l(s).errors.password?(r(),n("div",ee,u(l(s).errors.password),1)):m("",!0)]),d("div",se,[t(f,null,{default:o(()=>e[11]||(e[11]=[i(" Password Confirmation ")])),_:1}),t(c,{modelValue:l(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).password_confirmation=a),type:"password"},null,8,["modelValue"]),l(s).errors.password_confirmation?(r(),n("div",le,u(l(s).errors.password_confirmation),1)):m("",!0)]),d("div",te,[t(f,null,{default:o(()=>e[12]||(e[12]=[i(" Mobile ")])),_:1}),t(c,{modelValue:l(s).mobile,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).mobile=a),type:"number"},null,8,["modelValue"]),l(s).errors.mobile?(r(),n("div",oe,u(l(s).errors.mobile),1)):m("",!0)]),d("div",ae,[t(f,null,{default:o(()=>e[13]||(e[13]=[i(" Role ")])),_:1}),t(C,{modelValue:l(s).role_id,"onUpdate:modelValue":[e[5]||(e[5]=a=>l(s).role_id=a),M]},{default:o(()=>[t(S,{class:"w-full cursor-pointer"},{default:o(()=>[t(B,{placeholder:"Select a role"})]),_:1}),t(N,null,{default:o(()=>[t(R,null,{default:o(()=>[(r(!0),n(k,null,U(l(b),(a,v)=>(r(),V(E,{key:v,value:a.id},{default:o(()=>[i(u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(s).errors.role_id?(r(),n("div",re,u(l(s).errors.role_id),1)):m("",!0)]),((_=x.value)==null?void 0:_.name)!=="admin"&&x.value!==void 0&&((p=x.value)==null?void 0:p.name)!=="manager"?(r(),n("div",de,[t(f,null,{default:o(()=>e[14]||(e[14]=[i(" Upline ")])),_:1}),t(C,{modelValue:l(s).upline_id,"onUpdate:modelValue":e[6]||(e[6]=a=>l(s).upline_id=a)},{default:o(()=>[t(S,{class:"w-full cursor-pointer"},{default:o(()=>[t(B,{placeholder:"Select a upline"})]),_:1}),t(N,null,{default:o(()=>[t(R,null,{default:o(()=>[(r(!0),n(k,null,U($.value,(a,v)=>(r(),V(E,{key:v,value:a.id},{default:o(()=>[i(u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(s).errors.upline_id?(r(),n("div",ie,u(l(s).errors.upline_id),1)):m("",!0)])):m("",!0)]}),_:1}),t(G,null,{default:o(()=>[d("div",ne,[t(g,{variant:"default",type:"submit"},{default:o(()=>e[15]||(e[15]=[i(" Create ")])),_:1}),t(g,{type:"reset"},{default:o(()=>e[16]||(e[16]=[i(" Reset ")])),_:1})])]),_:1})]),_:1})],32)])])]),_:1}))}});export{ge as default};

import{P,S as F}from"./index-D4rW4xQz.js";import{d as A,g as O,o as N,w as y,q as B,u as g,y as p,c as C,a1 as k,a2 as G,H as L,a3 as V,a4 as R,j,G as K,e as z}from"./app-wyVmJDg6.js";import{c as H,a as Y}from"./useForwardExpose-CrfCHcOy.js";import{i as q,g as _,c as W}from"./useForwardPropsEmits-CrHVVcKp.js";const le=A({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(e){return(t,n)=>(N(),O(g(P),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:y(()=>[B(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function J(e){const t=q({dir:p("ltr")});return C(()=>{var n;return(e==null?void 0:e.value)||((n=t.dir)==null?void 0:n.value)||"ltr"})}function x(){const e=p(),t=C(()=>{var n,o;return["#text","#comment"].includes((n=e.value)==null?void 0:n.$el.nodeName)?(o=e.value)==null?void 0:o.$el.nextElementSibling:H(e)});return{primitiveElement:e,currentElement:t}}const M="data-reka-collection-item";function Q(e={}){const{key:t="",isProvider:n=!1}=e,o=`${t}CollectionProvider`;let a;if(n){const s=p(new Map);a={collectionRef:p(),itemMap:s},k(o,a)}else a=G(o);const I=(s=!1)=>{const r=a.collectionRef.value;if(!r)return[];const i=Array.from(r.querySelectorAll(`[${M}]`)),c=Array.from(a.itemMap.value.values()).sort((d,m)=>i.indexOf(d.ref)-i.indexOf(m.ref));return s?c:c.filter(d=>d.ref.dataset.disabled!=="")},w=A({name:"CollectionSlot",setup(s,{slots:r}){const{primitiveElement:i,currentElement:u}=x();return j(u,()=>{a.collectionRef.value=u.value}),()=>R(F,{ref:i},r)}}),S=A({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:r,attrs:i}){const{primitiveElement:u,currentElement:c}=x();return L(d=>{if(c.value){const m=V(c.value);a.itemMap.value.set(m,{ref:c.value,value:s.value}),d(()=>a.itemMap.value.delete(m))}}),()=>R(F,{...i,[M]:"",ref:u},r)}}),E=C(()=>Array.from(a.itemMap.value.values())),h=C(()=>a.itemMap.value.size);return{getItems:I,reactiveItems:E,itemMapSize:h,CollectionSlot:w,CollectionItem:S}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ue(e,t,n){const o=te(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ee[o]}function oe(e,t=!1){const n=_();for(const o of e)if(o===n||(o.focus({preventScroll:t}),_()!==n))return}function ce(e,t){return e.map((n,o)=>e[(t+o)%e.length])}const[de,ne]=W("RovingFocusGroup"),fe=A({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:n}){const o=e,a=n,{loop:I,orientation:w,dir:S}=K(o),E=J(S),h=Y(o,"currentTabStopId",a,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),s=p(!1),r=p(!1),i=p(0),{getItems:u,CollectionSlot:c}=Q({isProvider:!0});function d(l){const v=!r.value;if(l.currentTarget&&l.target===l.currentTarget&&v&&!s.value){const b=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(b),a("entryFocus",b),!b.defaultPrevented){const T=u().map(f=>f.ref).filter(f=>f.dataset.disabled!==""),$=T.find(f=>f.getAttribute("data-active")===""),D=T.find(f=>f.id===h.value),U=[$,D,...T].filter(Boolean);oe(U,o.preventScrollOnEntryFocus)}}r.value=!1}function m(){setTimeout(()=>{r.value=!1},1)}return t({getItems:u}),ne({loop:I,dir:E,orientation:w,currentTabStopId:h,onItemFocus:l=>{h.value=l},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,v)=>(N(),O(g(c),null,{default:y(()=>[z(g(P),{tabindex:s.value||i.value===0?-1:0,"data-orientation":g(w),as:l.as,"as-child":l.asChild,dir:g(E),style:{outline:"none"},onMousedown:v[0]||(v[0]=b=>r.value=!0),onMouseup:m,onFocus:d,onBlur:v[1]||(v[1]=b=>s.value=!1)},{default:y(()=>[B(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{le as _,Q as a,J as b,fe as c,oe as f,ue as g,de as i,x as u,ce as w};

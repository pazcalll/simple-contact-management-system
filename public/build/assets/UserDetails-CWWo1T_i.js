import{d as A,n as G,C as H,y as w,g as V,o as r,w as t,b as d,i as I,e as o,a as n,h as _,f as u,u as l,t as m,F as j,r as E}from"./app-DDH9-M8F.js";import{_ as J,a as K,b as Q,c as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dh_59i8g.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-DRq4L5js.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-C1s4DYKS.js";import{_ as X,t as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-DB6ZMh0f.js";import{_ as Z}from"./index-Bl7ULf9p.js";import{a as h}from"./users-BtwOUv08.js";import{_ as D,a as F,b as M,c as P,d as L,e as O}from"./SelectContent.vue_vue_type_script_setup_true_lang-diDvTw5A.js";import"./useForwardExpose-fh6Ok7He.js";import"./useForwardPropsEmits-DhJmBs81.js";import"./x-CmkwNOn8.js";import"./RovingFocusGroup-B1ONIDe3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DpgiMkX7.js";import"./check-CzJqFMvt.js";const ee={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},se={class:"mx-0 flex w-full justify-center"},le={class:"mx-3 my-5 space-y-2"},oe={key:0,class:"text-xs text-red-500"},te={class:"mx-3 my-5 space-y-2"},ae={key:0,class:"text-xs text-red-500"},re={class:"mx-3 my-5 space-y-2"},de={key:0,class:"text-xs text-red-500"},ie={class:"mx-3 my-5 space-y-2"},ne={key:0,class:"text-xs text-red-500"},ue={class:"mx-3 my-5 space-y-2"},me={key:0,class:"text-xs text-red-500"},pe={class:"mx-3 my-5 space-y-2"},_e={key:0,class:"text-xs text-red-500"},fe={key:0,class:"mx-3 my-5 space-y-2"},ce={key:0,class:"text-xs text-red-500"},xe={class:"mx-3 flex w-full justify-center gap-4"},Ee=A({__name:"UserDetails",setup(ye){var $,k,g,S,B,C,N;const i=G(),s=H({name:(($=i.props.user)==null?void 0:$.name)||"",email:((k=i.props.user)==null?void 0:k.email)||"",password:"",password_confirmation:"",mobile:((g=i.props.user)==null?void 0:g.mobile)||"",role_id:((B=(S=i.props.user)==null?void 0:S.roles[0])==null?void 0:B.id)||"",upline_id:((C=i.props.user)==null?void 0:C.upline_id)||""}),b=i.props.roles,U=w(i.props.possibleUplines||[]),x=w((N=i.props.user)==null?void 0:N.roles[0]),T=w(i.props.upline),q=()=>{s.submit("patch","/admins/users/"+i.props.user.id,{onError:y=>{let e="";for(const[,p]of Object.entries(y))e=`${p}`;Y.error(e,{duration:6e3,class:"!bg-red-500 !text-white"})}})},z=async y=>{const e=b.filter(p=>p.id===y)[0];if(x.value=e,e.upline_id){const p=await h(e.upline_id+"");U.value=p}s.upline_id="",T.value=void 0};return(y,e)=>(r(),V(X,null,{default:t(()=>[d("div",ee,[d("div",se,[d("form",{onSubmit:I(q,["prevent"])},[o(J,{class:"block w-[26rem] md:w-[40rem]"},{default:t(()=>[o(K,{class:"w-full text-center"},{default:t(()=>e[7]||(e[7]=[d("h2",{class:"text-2xl font-bold"},"Update User",-1)])),_:1}),o(Q,null,{default:t(()=>{var p,R;return[d("div",le,[o(f,null,{default:t(()=>e[8]||(e[8]=[u(" Name ")])),_:1}),o(c,{modelValue:l(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).name=a)},null,8,["modelValue"]),l(s).errors.name?(r(),n("div",oe,m(l(s).errors.name),1)):_("",!0)]),d("div",te,[o(f,null,{default:t(()=>e[9]||(e[9]=[u(" Email ")])),_:1}),o(c,{modelValue:l(s).email,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).email=a),type:"email"},null,8,["modelValue"]),l(s).errors.email?(r(),n("div",ae,m(l(s).errors.email),1)):_("",!0)]),d("div",re,[o(f,null,{default:t(()=>e[10]||(e[10]=[u(" Password ")])),_:1}),o(c,{modelValue:l(s).password,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).password=a),type:"password"},null,8,["modelValue"]),l(s).errors.password?(r(),n("div",de,m(l(s).errors.password),1)):_("",!0)]),d("div",ie,[o(f,null,{default:t(()=>e[11]||(e[11]=[u(" Password Confirmation ")])),_:1}),o(c,{modelValue:l(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).password_confirmation=a),type:"password"},null,8,["modelValue"]),l(s).errors.password_confirmation?(r(),n("div",ne,m(l(s).errors.password_confirmation),1)):_("",!0)]),d("div",ue,[o(f,null,{default:t(()=>e[12]||(e[12]=[u(" Mobile ")])),_:1}),o(c,{modelValue:l(s).mobile,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).mobile=a),type:"number"},null,8,["modelValue"]),l(s).errors.mobile?(r(),n("div",me,m(l(s).errors.mobile),1)):_("",!0)]),d("div",pe,[o(f,null,{default:t(()=>e[13]||(e[13]=[u(" Role ")])),_:1}),o(D,{modelValue:l(s).role_id,"onUpdate:modelValue":[e[5]||(e[5]=a=>l(s).role_id=a),z]},{default:t(()=>[o(F,{class:"w-full cursor-pointer"},{default:t(()=>[o(M,{placeholder:"Select a role"})]),_:1}),o(P,null,{default:t(()=>[o(L,null,{default:t(()=>[(r(!0),n(j,null,E(l(b),(a,v)=>(r(),V(O,{key:v,value:a.id},{default:t(()=>[u(m(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(s).errors.role_id?(r(),n("div",_e,m(l(s).errors.role_id),1)):_("",!0)]),((p=x.value)==null?void 0:p.name)!=="admin"&&x.value!==void 0&&((R=x.value)==null?void 0:R.name)!=="manager"?(r(),n("div",fe,[o(f,null,{default:t(()=>e[14]||(e[14]=[u(" Upline ")])),_:1}),o(D,{modelValue:l(s).upline_id,"onUpdate:modelValue":e[6]||(e[6]=a=>l(s).upline_id=a)},{default:t(()=>[o(F,{class:"w-full cursor-pointer"},{default:t(()=>[o(M,{placeholder:"Select a upline"})]),_:1}),o(P,null,{default:t(()=>[o(L,null,{default:t(()=>[(r(!0),n(j,null,E(U.value,(a,v)=>(r(),V(O,{key:v,value:a.id},{default:t(()=>[u(m(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(s).errors.upline_id?(r(),n("div",ce,m(l(s).errors.upline_id),1)):_("",!0)])):_("",!0)]}),_:1}),o(W,null,{default:t(()=>[d("div",xe,[o(Z,{variant:"default",class:"w-[50%]",type:"submit"},{default:t(()=>e[15]||(e[15]=[u(" Update ")])),_:1})])]),_:1})]),_:1})],32)])])]),_:1}))}});export{Ee as default};
